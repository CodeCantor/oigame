<% @page_title = t(:create_campaign) %>

<div id="campaigns-wrapper">
  <div id="create-campaigns">
    <div id="create-campaign-form" class="form-stacked">
      <h2><%= @page_title %></h2>
      <%= form_for(@campaign) do |f| %>
        <fieldset>
          <legend><%= t(:please_fill_the_form) %></legend>
          <div class="form-field">
            <%= f.label t(:name_of_campaign) %>
            <%= f.text_field :name, :class => 'span8', :required => true, :placeholder => 'Título de la campaña' %>
            <% unless @campaign.errors[:name].blank? %>
              <span class="error_message"><%= @campaign.errors[:name].to_sentence %></span>
            <% end %>
          </div>
          <div class="form-field">
            <%= f.label t(:intro_of_campaign) %>
            <div class="wmd-panel">
              <div id="wmd-button-bar"></div>
              <%= f.text_area :intro, :class => 'wmd-input', :id => 'wmd-input', :rows => 6, :class => 'span8', :required => true, :placeholder => 'Entradilla de la campaña, este texto aparece en el listado de campañas.' %>
            </div>
            <% unless @campaign.errors[:intro].blank? %>
              <span class="error_message"><%= @campaign.errors[:intro].to_sentence %></span>
            <% end %>
          </div>
          <div class="form-field">
            <%= f.label t(:body_of_campaign) %>
            <div class="wmd-panel">
              <div id="wmd-button-bar-second"></div>
              <%= f.text_area :body, :class => 'wmd-input', :id => 'wmd-input-second', :rows => 10, :class => 'span8', :required => true, :placeholder => 'Texto desarrollado de la campaña' %>
            </div>
            <% unless @campaign.errors[:body].blank? %>
              <span class="error_message"><%= @campaign.errors[:body].to_sentence %></span>
            <% end %>
          </div>
          <div class="form-field">
            <%= f.label t(:recipients) %>
            <%= f.text_area :recipients, :rows => 10, :class => 'span8', :required => true, :placeholder => 'Lista de direcciones de correo de destinatarios, una por línea.' %>
          </div>
          <div class="form-field">
            <%= f.label t(:tags) %>
            <%= f.text_field :tag_list, :class => 'span8', :placeholder => 'Lista de etiquetas separadas por comas' %>
          </div>
          <div id="form-actions">
            <%= f.submit @page_title, :class => 'btn submit' %>
          </div>
        </fieldset>
      <% end %>
      <%= link_to t(:cancel), campaigns_path %>
    </div><!-- create-campaign-form -->
  </div><!-- create-campaigns -->
</div><!-- campaigns-wrapper -->

<script type="text/javascript">
  (function() {
    var converter1 = Markdown.getSanitizingConverter();
    var editor1 = new Markdown.Editor(converter1);
    editor1.run();
    
    var converter2 = Markdown.getSanitizingConverter();
    var editor2 = new Markdown.Editor(converter2, "-second");
    editor2.run();
  })();
</script>
