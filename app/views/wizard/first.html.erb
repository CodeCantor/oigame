
<% @page_title = t(:propose_campaign) %>

<div id="campaigns-wrapper">
  <div id="create-campaigns">
    <div id="create-campaign-form" class="form-stacked">
      <h2><%= @page_title %></h2>

<%= form_for @campaign, :url => wizard_path do |f| %>
  <fieldset>
    <legend><%= t(:please_fill_the_form) %></legend>
    <div class="form-field">
      <%= f.label :name, t(:name_of_campaign) %>
      <%= f.text_field :name, :class => 'span6', :required => true, :placeholder => t(:name_of_campaign) %>
      <% unless @campaign.errors[:name].blank? %>
        <span class="error_message"><%= @campaign.errors[:name].to_sentence %></span>
      <% end %>
    </div>
    <div class="form-field">
      <%= f.label :image, t(:image_of_campaign) %>
      <%= f.file_field :image, :class => 'input-file' %>
      <p><%= I18n.t(:minimal_size) %></p>
      <% unless @campaign.errors[:image].blank? %>
        <span class="error_message"><%= @campaign.errors[:image].to_sentence %></span>
      <% end %>
    </div>
    <div class="form-field">
      <%= f.label :intro, t(:intro_of_campaign) %>
      <div class="wmd-panel">
        <div id="wmd-button-bar"></div>
        <%= f.text_area :intro, :class => 'wmd-input', :id => 'wmd-input', :rows => 6, :class => 'span6', :required => true, :placeholder => t(:intro_of_campaign_help), :maxlength => 500 %>
        <p><%= I18n.t(:intro_limit) %></p>
      </div>
      <a href="#" class="show_markdown_help"><%= I18n.t(:markdown_help_show) %></a>
      <div class="markdown_help" style="display:none;">
        <%= render :partial => 'campaigns/markdown_help' %>
      </div>
      <% unless @campaign.errors[:intro].blank? %>
        <span class="error_message"><%= @campaign.errors[:intro].to_sentence %></span>
      <% end %>
    </div>
    <div id="form-actions">
      <%= link_to 'Siguiente paso', next_wizard_path, :class => 'btn btn-primary btn-large' %>
    </div>
  </fieldset>
<% end %>



    </div><!-- create-campaign-form -->
  </div><!-- create-campaigns -->
</div><!-- campaigns-wrapper -->

<script type="text/javascript">
  (function() {
    var converter1 = Markdown.getSanitizingConverter();
    var editor1 = new Markdown.Editor(converter1);
    editor1.run();
    
    var converter2 = Markdown.getSanitizingConverter();
    var editor2 = new Markdown.Editor(converter2, "-second");
    editor2.run();
  })();
</script>

